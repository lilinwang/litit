!function(t){function o(o,a){function s(){return b.update(),i(),n(),b}function e(){var t=w.toLowerCase();j.obj.css(v,M/x.ratio),d.obj.css(v,-M),y.start=j.obj.offset()[v],x.obj.css(t,f[a.axis]),f.obj.css(t,f[a.axis]),j.obj.css(t,j[a.axis])}function i(){z?m.obj[0].ontouchstart=function(t){1===t.touches.length&&(u(t.touches[0]),t.stopPropagation())}:(j.obj.bind("mousedown",u),f.obj.bind("mouseup",c)),a.scroll&&window.addEventListener?(h[0].addEventListener("DOMMouseScroll",r,!1),h[0].addEventListener("mousewheel",r,!1)):a.scroll&&(h[0].onmousewheel=r)}function n(){a.autohide&&(x.obj.css("opacity",1),clearTimeout(D),D=setTimeout(function(){x.obj.fadeTo(null,0)},a.autohideTimeout))}function u(o){var a=parseInt(j.obj.css(v),10);y.start=p?o.pageX:o.pageY,g.start="auto"==a?0:a,z?(document.ontouchmove=function(t){t.preventDefault(),c(t.touches[0])},document.ontouchend=l):(t(document).bind("mousemove",c),t(document).bind("mouseup",l),j.obj.bind("mouseup",l))}function r(o){if(d.ratio<1){var s=o||window.event,e=s.wheelDelta?s.wheelDelta/120:-s.detail/3;M-=e*a.wheel,M=Math.min(d[a.axis]-m[a.axis],Math.max(0,M)),j.obj.css(v,M/x.ratio),d.obj.css(v,-M),n(),(a.lockscroll||M!==d[a.axis]-m[a.axis]&&0!==M)&&(s=t.event.fix(s),s.preventDefault())}}function c(t){d.ratio<1&&(g.now=z?Math.min(f[a.axis]-j[a.axis],Math.max(0,g.start+(y.start-(p?t.pageX:t.pageY)))):Math.min(f[a.axis]-j[a.axis],Math.max(0,g.start+((p?t.pageX:t.pageY)-y.start))),n(),M=g.now*x.ratio,d.obj.css(v,-M),j.obj.css(v,g.now))}function l(){t(document).unbind("mousemove",c),t(document).unbind("mouseup",l),j.obj.unbind("mouseup",l),document.ontouchmove=document.ontouchend=null}var b=this,h=o,m={obj:t(".viewport",o)},d={obj:t(".overview",o)},x={obj:t(".scrollbar",o)},f={obj:t(".track",x.obj)},j={obj:t(".thumb",x.obj)},p="x"===a.axis,v=p?"left":"top",w=p?"Width":"Height",M=0,g={start:0,now:0},y={},z="ontouchstart"in document.documentElement?!0:!1,D=null;return this.update=function(t){m[a.axis]=m.obj[0]["offset"+w],d[a.axis]=d.obj[0]["scroll"+w],d.ratio=m[a.axis]/d[a.axis],x.obj.toggleClass("disable",d.ratio>=1),f[a.axis]="auto"===a.size?m[a.axis]:a.size,j[a.axis]=Math.min(f[a.axis],Math.max(0,"auto"===a.sizethumb?f[a.axis]*d.ratio:a.sizethumb)),x.ratio="auto"===a.sizethumb?d[a.axis]/f[a.axis]:(d[a.axis]-m[a.axis])/(f[a.axis]-j[a.axis]),M="relative"===t&&d.ratio<=1?Math.min(d[a.axis]-m[a.axis],Math.max(0,M)):0,M="bottom"===t&&d.ratio<=1?d[a.axis]-m[a.axis]:isNaN(parseInt(t,10))?M:parseInt(t,10),e()},s()}t.tiny=t.tiny||{},t.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:!0,lockscroll:!0,size:"auto",sizethumb:"auto",autohide:!1,autohideTimeout:1e3}},t.fn.tinyscrollbar=function(a){var s=t.extend({},t.tiny.scrollbar.options,a);return this.each(function(){t(this).data("tsb",new o(t(this),s))}),this},t.fn.tinyscrollbar_update=function(o){return t(this).data("tsb").update(o)}}(jQuery);